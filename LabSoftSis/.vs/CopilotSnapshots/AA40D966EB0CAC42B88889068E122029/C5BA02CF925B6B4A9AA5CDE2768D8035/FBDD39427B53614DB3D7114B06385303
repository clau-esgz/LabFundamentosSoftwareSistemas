# Analizador de Lenguaje Ensamblador SIC/XE
**Laboratorio Práctica 3 - Fundamentos de Software de Sistemas**

## Descripción
Este proyecto implementa un analizador léxico, sintáctico y semántico completo para el lenguaje ensamblador SIC/XE utilizando ANTLR 4 en C# con .NET 10.

## Características Principales

### ✅ Análisis Léxico
- Reconocimiento de todas las instrucciones SIC/XE (formato 1, 2, 3/4)
- Identificación de directivas (START, END, BYTE, WORD, RESB, RESW, etc.)
- Soporte para modos de direccionamiento (inmediato #, indirecto @, indexado ,X)
- Reconocimiento de formato extendido (+)
- Literales (hexadecimales, caracteres, numéricos)
- Comentarios (iniciando con .)

### ✅ Análisis Sintáctico
- Validación de estructura del programa
- Verificación de formato de líneas (etiqueta-operación-operando)
- Generación de árbol sintáctico

### ✅ Análisis Semántico
- **Validación de etiquetas:**
  - Máximo 6 caracteres
  - Deben iniciar con letra
  - Detección de etiquetas duplicadas

- **Validación de operandos:**
  - Número correcto según instrucción
  - Validación de registros válidos (A, X, L, B, S, T, F, PC, SW)
  - Formato correcto de constantes

- **Detección de errores:**
  - Instrucciones no válidas
  - Directivas mal escritas
  - Número incorrecto de operandos
  - Formato incorrecto de operandos

### ✅ Reportes Detallados
- Lista de tokens reconocidos
- Etiquetas definidas
- Errores encontrados con línea y columna
- Árbol sintáctico
- Archivo de reporte generado automáticamente

### ✅ Menú Interactivo
- Listado de archivos .asm y .txt disponibles
- Selección numerada
- Análisis de múltiples archivos
- Opción de salida

## Estructura del Proyecto

```
laboratorioPractica3/
├── grammar/
│   └── SICXE.g4                    # Gramática ANTLR
├── reportes/                       # Carpeta para reportes generados
│   ├── .gitkeep                    # Mantiene carpeta en git
│   └── .gitignore                  # Ignora reportes generados
├── Program.cs                      # Programa principal
├── SICXEErrorListener.cs           # Captura de errores léxicos/sintácticos
├── SICXESemanticAnalyzer.cs        # Análisis semántico
├── programa_ok.asm                 # Programa de prueba válido
├── programa_err.asm                # Programa de prueba con errores
├── test_valid.asm                  # Otro programa válido
├── test_errors.asm                 # Programa con errores diversos
└── laboratorioPractica3.csproj     # Configuración del proyecto
```

## Requisitos
- .NET 10.0 SDK
- Visual Studio 2022 (recomendado)
- Paquetes NuGet:
  - Antlr4.Runtime.Standard 4.13.1
  - Antlr4BuildTasks 12.14.0

## Uso

### Modo Interactivo (Menú)
```bash
dotnet run
```
Se mostrará un menú con todos los archivos .asm y .txt disponibles.

### Modo Línea de Comandos
```bash
dotnet run -- archivo.asm
```

## Ejemplos de Análisis

### Programa Válido (programa_ok.asm)
- Programa completo con subrutinas
- Uso correcto de instrucciones formato 1, 2, 3 y 4
- Directivas START, END, RESW, RESB, BYTE, WORD, LTORG
- Modos de direccionamiento: inmediato, indexado, extendido
- Literales

### Programa con Errores (programa_err.asm)
Contiene errores intencionales para prueba:
- Etiquetas con más de 6 caracteres
- Instrucciones no válidas
- Directivas mal escritas
- Operandos faltantes
- Etiquetas duplicadas
- Número incorrecto de operandos

## Salida del Programa

El analizador genera:

### 1. **Reporte en Consola**
- Información del archivo analizado
- Tokens reconocidos (con opción verbose)
- Resumen de tokens por tipo
- Etiquetas definidas en el programa
- **Árbol sintáctico formateado**
- Errores encontrados (agrupados por tipo: léxico, sintáctico, semántico)
- Resultado final (válido o con errores)

### 2. **Archivo de Reporte (en carpeta `reportes/`)**
Formato: `<nombre_archivo>_reporte_<timestamp>.txt`

Ejemplo: `test_valid_reporte_20260217_152345.txt`

Contiene:
- Reporte completo del análisis
- Detalle de errores por línea y columna
- Descripción específica de cada error
- **Árbol sintáctico completo**
- Estadísticas de análisis

### Ejemplo de Reporte de Error:
```
ERRORES ENCONTRADOS:
───────────────────────────────────────────────────────────────────

  ERRORES SEMANTICOS:
    - Linea 2, Columna 0 - [ERROR SEMANTICO]: Etiqueta 'ETIQUETALARGUISIMA' excede el maximo de 6 caracteres (longitud actual: 19). Las etiquetas deben tener entre 1 y 6 caracteres.
    - Linea 7, Columna 1 - [ERROR SEMANTICO]: La instruccion 'CLEAR' requiere exactamente 1 registro (formato: REG), pero se encontraron 2 operando(s).
    - Linea 10, Columna 0 - [ERROR SEMANTICO]: BYTE requiere constante hexadecimal (formato: X'..') o de caracteres (formato: C'..'). Se encontro: '123'.

  Total errores: 3 (Lexicos: 0, Sintacticos: 0, Semanticos: 3)
```

## Ubicación de Reportes

Los reportes se guardan automáticamente en la carpeta `reportes/` con timestamp:
- `reportes/programa_ok_reporte_20260217_152345.txt`
- `reportes/programa_err_reporte_20260217_152401.txt`

Esto permite:
- Mantener historial de análisis
- Comparar diferentes versiones
- No sobrescribir reportes anteriores

## Gramática SIC/XE

La gramática implementada incluye:
- ✅ Instrucciones formato 1, 2, 3/4
- ✅ Directivas completas
- ✅ Modos de direccionamiento
- ✅ Formato extendido (+)
- ✅ Literales (=X'', =C'', =número)
- ✅ Indexado (,X)
- ✅ Inmediato (#)
- ✅ Indirecto (@)
- ✅ Comentarios (.)

## Rúbrica de Evaluación

### Configuración del proyecto (10/10) ✅
- Proyecto compila y ejecuta correctamente
- Lexer/parser generados por ANTLR
- Estructura limpia y organizada

### Gramática SICXE.g4 (10/10) ✅
- Incluye todas las instrucciones SIC/XE
- Directivas completas
- Modos de direccionamiento
- Formato extendido

### Análisis programa correcto (10/10) ✅
- Reconoce correctamente todas las instrucciones
- Operandos y modos de direccionamiento
- Genera árbol sintáctico sin errores

### Análisis programa con errores (10/10) ✅
- Identifica todos los errores
- Mensajes claros en español
- Árbol parcial correcto

## Autor
Laboratorio Práctica 3 - Fundamentos de Software de Sistemas
Fecha: Febrero 2026
